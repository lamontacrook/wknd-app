{"ast":null,"code":"import { contentPath, apiHost } from \"./index\";\nconst {\n  REACT_APP_USE_PROXY\n} = process.env;\nexport const externalizePaths = json => {\n  let data = json;\n  if (!REACT_APP_USE_PROXY) data = _processModelJson(json);\n  return data;\n};\nconst acceptContent = value => {\n  return value.match(/^\\/content\\/.*\\.(jpg|jpeg|gif|png|wepb|html)$/i);\n};\nconst rewriteFn = value => {\n  if (value.startsWith(contentPath) && value.match(/^\\/content\\/.*\\.(html)$/)) {\n    value = value.substring(contentPath.length);\n  } else if (value.match(/^\\/content\\/.*\\.(jpg|jpeg|gif|png|wepb)$/)) {\n    if (apiHost.endsWith(\"/\") && value.startsWith(\"/\")) {\n      value = apiHost + value.substring(1);\n    } else {\n      value = apiHost + value;\n    }\n  }\n  return value;\n};\nconst _processModelJson = jsonObject => {\n  Object.keys(jsonObject).forEach(function (propertyName) {\n    if (jsonObject[propertyName] !== null && typeof jsonObject[propertyName] === 'object') {\n      _processModelJson(jsonObject[propertyName]);\n      return;\n    }\n    if (typeof jsonObject[propertyName] === 'string' && acceptContent(jsonObject[propertyName])) {\n      jsonObject[propertyName] = rewriteFn(jsonObject[propertyName]);\n    }\n  });\n  return jsonObject;\n};","map":{"version":3,"names":["contentPath","apiHost","REACT_APP_USE_PROXY","process","env","externalizePaths","json","data","_processModelJson","acceptContent","value","match","rewriteFn","startsWith","substring","length","endsWith","jsonObject","Object","keys","forEach","propertyName"],"sources":["/Users/lamont/Workspace/andy/wknd-app/src/utils/externalizePaths.js"],"sourcesContent":["import { contentPath, apiHost } from \"./index\";\r\nconst { REACT_APP_USE_PROXY } = process.env;\r\n\r\n\r\nexport const externalizePaths = (json) => {\r\n  let data = json;\r\n\r\n  if (!REACT_APP_USE_PROXY) data = _processModelJson(json);\r\n\r\n  return data;\r\n}\r\n\r\nconst acceptContent = (value) => {\r\n  return value.match(/^\\/content\\/.*\\.(jpg|jpeg|gif|png|wepb|html)$/i);\r\n}\r\n\r\n\r\nconst rewriteFn = (value) => {\r\n  if (value.startsWith(contentPath) && value.match(/^\\/content\\/.*\\.(html)$/)) {\r\n    value = value.substring(contentPath.length);\r\n\r\n  } else if (value.match(/^\\/content\\/.*\\.(jpg|jpeg|gif|png|wepb)$/)) {\r\n    if (apiHost.endsWith(\"/\") && value.startsWith(\"/\")) {\r\n      value = apiHost + value.substring(1);\r\n    } else {\r\n      value = apiHost + value;\r\n    }\r\n  }\r\n\r\n  return value;\r\n}\r\n\r\nconst _processModelJson = (jsonObject) => {\r\n  Object.keys(jsonObject).forEach(function (propertyName) {\r\n    if (jsonObject[propertyName] !== null && typeof jsonObject[propertyName] === 'object') {\r\n      _processModelJson(jsonObject[propertyName]);\r\n      return;\r\n    }\r\n\r\n    if (\r\n      typeof jsonObject[propertyName] === 'string' &&\r\n      acceptContent(jsonObject[propertyName])\r\n    ) {\r\n      jsonObject[propertyName] = rewriteFn(jsonObject[propertyName]);\r\n    }\r\n  });\r\n  return jsonObject;\r\n}\r\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,OAAO,QAAQ,SAAS;AAC9C,MAAM;EAAEC;AAAoB,CAAC,GAAGC,OAAO,CAACC,GAAG;AAG3C,OAAO,MAAMC,gBAAgB,GAAIC,IAAI,IAAK;EACxC,IAAIC,IAAI,GAAGD,IAAI;EAEf,IAAI,CAACJ,mBAAmB,EAAEK,IAAI,GAAGC,iBAAiB,CAACF,IAAI,CAAC;EAExD,OAAOC,IAAI;AACb,CAAC;AAED,MAAME,aAAa,GAAIC,KAAK,IAAK;EAC/B,OAAOA,KAAK,CAACC,KAAK,CAAC,gDAAgD,CAAC;AACtE,CAAC;AAGD,MAAMC,SAAS,GAAIF,KAAK,IAAK;EAC3B,IAAIA,KAAK,CAACG,UAAU,CAACb,WAAW,CAAC,IAAIU,KAAK,CAACC,KAAK,CAAC,yBAAyB,CAAC,EAAE;IAC3ED,KAAK,GAAGA,KAAK,CAACI,SAAS,CAACd,WAAW,CAACe,MAAM,CAAC;EAE7C,CAAC,MAAM,IAAIL,KAAK,CAACC,KAAK,CAAC,0CAA0C,CAAC,EAAE;IAClE,IAAIV,OAAO,CAACe,QAAQ,CAAC,GAAG,CAAC,IAAIN,KAAK,CAACG,UAAU,CAAC,GAAG,CAAC,EAAE;MAClDH,KAAK,GAAGT,OAAO,GAAGS,KAAK,CAACI,SAAS,CAAC,CAAC,CAAC;IACtC,CAAC,MAAM;MACLJ,KAAK,GAAGT,OAAO,GAAGS,KAAK;IACzB;EACF;EAEA,OAAOA,KAAK;AACd,CAAC;AAED,MAAMF,iBAAiB,GAAIS,UAAU,IAAK;EACxCC,MAAM,CAACC,IAAI,CAACF,UAAU,CAAC,CAACG,OAAO,CAAC,UAAUC,YAAY,EAAE;IACtD,IAAIJ,UAAU,CAACI,YAAY,CAAC,KAAK,IAAI,IAAI,OAAOJ,UAAU,CAACI,YAAY,CAAC,KAAK,QAAQ,EAAE;MACrFb,iBAAiB,CAACS,UAAU,CAACI,YAAY,CAAC,CAAC;MAC3C;IACF;IAEA,IACE,OAAOJ,UAAU,CAACI,YAAY,CAAC,KAAK,QAAQ,IAC5CZ,aAAa,CAACQ,UAAU,CAACI,YAAY,CAAC,CAAC,EACvC;MACAJ,UAAU,CAACI,YAAY,CAAC,GAAGT,SAAS,CAACK,UAAU,CAACI,YAAY,CAAC,CAAC;IAChE;EACF,CAAC,CAAC;EACF,OAAOJ,UAAU;AACnB,CAAC"},"metadata":{},"sourceType":"module"}